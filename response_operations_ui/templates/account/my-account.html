{% extends "layouts/base.html" %}
{% from "components/metadata/_macro.njk" import onsMetadata %}
{% from "components/radios/_macro.njk" import onsRadios %}
{% from "components/button/_macro.njk" import onsButton %}
{% set page_title = "Respondents" %}

{% block main %}

{% include 'partials/flashed-messages.html' %}

<section>
  <h1 id="respondent-name">Account details</h1>
  <div class="grid grid--gutterless">
      <div class="grid__col col-10@m">
          {{
              onsMetadata({
                  "metadataLabel": "Account details",
                  "termCol": "3",
                  "descriptionCol": "9",
                  "itemsList": [
                      {
                          "term": "Username:",
                          "descriptions": [
                              {
                                  "description": user.username,
                                  "id": "username",
                                  "name": "username"
                              }
                          ]
                      },
                      {
                          "term": "Name:",
                          "descriptions": [
                              {
                                  "description": user.name,
                                  "id": "name",
                                  "name": "name"
                              },
                          ]
                      },
                      {
                          "term": "Email address:",
                          "descriptions": [
                              {
                                  "description": user.email,
                                  "id": "email-address"
                              },
                          ]
                      },
                      {
                          "term": "Password:",
                          "descriptions": [
                              {
                                  "description": "****** (last changed on " + user.password_last_changed + ")",
                                  "id": "password"
                              },
                          ]
                      }
                  ]
              })
          }}
      </div>
  </div>
</section>
<section>
  <h1 class="u-fs-xl">Help with your account</h1>
  <form action="{{ url_for('account_bp.update_account')}}" method="post">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
    {% set radioComponent = {
            "legend": "Choose an option",
            "name": "option",
            "id": "option",
            "error": errorOption,
        } %}
    {% set radios = [] %}
    {% do radios.append(
            {
                "id": "change_name",
                "label": {
                "text": "Change my name"
                },
                "value": "change_name"
            }) %}
    {% do radios.append(
            {
                "id": "change_username",
                "label": {
                "text": "Change my username"
                },
                "value": "change_username"
            }) %}
    {% do radioComponent | setAttribute("radios", radios) %}
    {{
      onsRadios(radioComponent)
    }}

    <div class="grid grid--flex grid--gutterless grid--vertical-center grid--no-wrap@s u-mt-m u-mb-m">
      <div class="grid__col">
        {{
          onsButton({
          "text": "Continue",
          "id": "btn-option-continue",
          "classes": 'btn-group__btn',
          "submitType": "timer"
          })
          }}
      </div>
      <div class="grid__col u-ml-m">
        <a href="{{ url_for('home_bp.get_overview_survey') }}" id="btn-option-cancel">Cancel</a>
      </div>
    </div>
  </form>
</section>
{% endblock main%}
