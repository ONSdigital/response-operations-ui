{% from "components/input/_macro.njk" import onsInput %}
{% set is_message_edit_permission = hasPermission('messages.edit') %}

{% call
    onsPanel({
        "type": "info",
        "classes": "ons-u-mb-l"
    })
%}
    <p class="ons-u-fs-r">This conversation was closed on {{ closed_at }} by {{ thread_data.closed_by }}</p>
{% endcall %}

{% if is_message_edit_permission %}
  <form action="{{ url_for('messages_bp.view_conversation', thread_id=messages[0].thread_id, ru_ref_filter=ru_ref_filter, business_id_filter=business_id_filter) }}" method="post">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
      {{
          onsInput({
              "name": "reopen",
              "type": "hidden",
              "value": "Re-open conversation",
              "label": {
                  "text": "Re-open conversation",
                  "classes": "ons-u-vh"
              },
          })
      }}
      {{
          onsButton({
              "text": "Re-open conversation",
              "id": "btn-reopen-conversation",
              "type": "submit",
              "name": "reopen",
              "classes": 'ons-u-mt-s ons-u-mb-s',
              "submitType": "timer"
          })
      }}
  </form>
{% endif %}
